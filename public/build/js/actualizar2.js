function iniciarApp(){cliente(),agregarEventosModal(),mostrarSeccionPorDefecto()}function agregarEventosModal(){const e=document.getElementById("abrirModal"),n=document.getElementById("cerrarModal");e.addEventListener("click",showModal),n.addEventListener("click",hideModal)}function showModal(){document.getElementById("miModal").style.display="block"}function hideModal(){document.getElementById("miModal").style.display="none",window.location.href="/defu"}function mostrarSeccionPorDefecto(){const e=document.querySelectorAll(".seccion-fallecido, .seccion-familia, .seccion-autorizacion, .seccion-evidencia, .seccion-certificado, .seccion-video, .seccion-remisiones, .seccion-comprobante, .seccion-observaciones");e.forEach(e=>{e.style.display="none"});const n=document.querySelectorAll(".navModal a"),t=document.querySelector(".seccion-fallecido");n.forEach(o=>{"fallecido"===o.getAttribute("data-tab")&&(o.classList.add("active"),t.style.display="block"),o.addEventListener("click",(function(t){t.preventDefault(),n.forEach(e=>{e.classList.remove("active")}),o.classList.add("active");const c=o.getAttribute("data-tab");e.forEach(e=>{e.classList.contains("seccion-"+c)?e.style.display="block":e.style.display="none"})}))})}function cliente(){const e={},n=document.querySelector("#cliente"),t=document.getElementById("suggestions");let o=!1;n.addEventListener("input",(async function(){const o=n.value;if(o.length>=2)try{const c="/autocomplete?term="+o,i=await fetch(c),a=await i.json();t.innerHTML="",a.forEach(o=>{if(""!==o.nombre.trim()){const c=document.createElement("div");c.textContent=o.nombre,c.addEventListener("mousedown",(function(){const c=o.nombre.trim();n.value=c,e.cliente=c,t.style.display="none"})),t.appendChild(c)}}),t.style.display=a.length>0?"block":"none"}catch(e){console.error("Error al obtener sugerencias de clientes:",e)}else t.style.display="none"})),n.addEventListener("mousedown",(async function(){try{const o="/autocomplete?term=",c=await fetch(o),i=await c.json();t.innerHTML="",i.forEach(o=>{if(""!==o.nombre.trim()){const c=document.createElement("div");c.textContent=o.nombre,c.addEventListener("mousedown",(function(){const c=o.nombre.trim();n.value=c,e.cliente=c,t.style.display="none"})),t.appendChild(c)}}),t.style.display=i.length>0?"block":"none"}catch(e){console.error("Error al obtener sugerencias de clientes:",e)}})),t.addEventListener("mouseenter",(function(){o=!0})),t.addEventListener("mouseleave",(function(){o=!1})),n.addEventListener("input",(function(){e.cliente=n.value})),n.addEventListener("blur",(function(){o||(t.style.display="none")}))}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".open-modal");"true"===new URLSearchParams(window.location.search).get("modal")&&showModal()}));